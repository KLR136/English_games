<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EL BEEPER Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: #F06B04;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            transition: all 0.5s ease;
            overflow: hidden;
        }

        .view {
            display: none;
            width: 100%;
            height: 100vh;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 20px;
        }

        .view.active {
            display: flex;
        }

        /* Orientation Message */
        .orientation-message {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #F06B04;
            z-index: 1000;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 20px;
        }

        .orientation-message.active {
            display: flex;
        }

        .orientation-icon {
            font-size: 80px;
            margin-bottom: 30px;
            animation: rotate 2s infinite;
        }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(90deg); }
        }

        .orientation-text {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .orientation-subtext {
            font-size: 18px;
            opacity: 0.8;
        }

        /* Responsive Design */
        @media (max-height: 600px) and (orientation: landscape) {
            .splash-container,
            .sound-on-container,
            .menu-container {
                padding: 20px;
                max-height: 90vh;
                overflow-y: auto;
            }
            
            .splash-logo,
            .menu-logo {
                max-width: 150px;
                margin-bottom: 10px;
            }
            
            .splash-text {
                font-size: 18px;
                margin: 10px 0;
            }
            
            .sound-on-title {
                font-size: 24px;
            }
            
            .sound-on-text {
                font-size: 16px;
                margin-bottom: 20px;
            }
            
            .mode-btn {
                min-height: 80px;
                padding: 10px 5px;
                font-size: 14px;
            }
            
            .mode-icon {
                max-height: 40px;
                margin-bottom: 5px;
            }
        }

        @media (max-width: 768px) {
            .countdown-number {
                font-size: 80px;
            }
            
            .countdown-text {
                font-size: 20px;
            }
            
            .question-display {
                font-size: 20px;
                padding: 15px;
            }
            
            .status-message {
                font-size: 18px;
                margin: 20px 0;
                padding: 10px;
            }
            
            .blue-screen-message,
            .red-screen-message {
                font-size: 24px;
            }
        }

        @media (max-width: 480px) {
            .splash-container,
            .sound-on-container,
            .menu-container,
            .game-container {
                padding: 15px;
                border-radius: 15px;
            }
            
            .splash-logo,
            .menu-logo {
                max-width: 120px;
            }
            
            .splash-text {
                font-size: 16px;
            }
            
            .sound-on-title {
                font-size: 20px;
            }
            
            .sound-on-text {
                font-size: 14px;
            }
            
            .continue-btn,
            .menu-btn,
            .next-btn {
                padding: 12px 25px;
                font-size: 14px;
            }
            
            .mode-buttons-container {
                flex-direction: column;
                gap: 10px;
            }
            
            .mode-btn {
                min-height: 70px;
                font-size: 13px;
            }
            
            .countdown-number {
                font-size: 60px;
            }
            
            .question-display {
                font-size: 18px;
            }
            
            .answer-item {
                padding: 10px;
                font-size: 14px;
            }
        }

        /* Splash Screen */
        .splash-container {
            background: #F6ECD1;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            text-align: center;
            max-width: 500px;
            width: 90%;
            color: #333;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            min-height: 200px;
            max-height: 500px;
        }

        .splash-logo {
            max-width: 300px;
            width: 80%;
            height: auto;
            animation: fadeIn 2s ease-in-out;
        }

        @keyframes fadeIn {
            0% { opacity: 0; transform: scale(0.8); }
            100% { opacity: 1; transform: scale(1); }
        }

        .splash-text {
            font-size: 24px;
            font-weight: bold;
            animation: pulse 2s infinite;
            margin: 20px 0;
        }

        .splash-team-logo {
            max-width: 150px;
            width: 40%;
            height: auto;
            opacity: 0.8;
            margin-top: 20px;
        }

        /* Sound On Screen */
        .sound-on-container {
            background: #F6ECD1;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            text-align: center;
            max-width: 500px;
            width: 90%;
            color: #333;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 400px;
        }

        .sound-on-icon {
            max-width: 200px;
            width: 60%;
            height: auto;
            margin-bottom: 30px;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .sound-on-title {
            font-size: 32px;
            font-weight: bold;
            color: #6c5ce7;
            margin-bottom: 15px;
        }

        .sound-on-text {
            font-size: 18px;
            color: #666;
            line-height: 1.5;
            margin-bottom: 30px;
            max-width: 80%;
        }

        .continue-btn {
            background: #F06B04;
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .continue-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        /* Main Menu */
        .menu-container {
            background: #F6ECD1;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            text-align: center;
            max-width: 500px;
            width: 90%;
            color: #333;
            position: relative;
        }

        .logo-space {
            margin-bottom: 20px;
        }

        .menu-logo {
            max-width: 200px;
            width: 100%;
            height: auto;
            margin-bottom: 15px;
        }

        .slogan-space {
            margin-bottom: 30px;
        }

        .slogan {
            font-size: 18px;
            color: #666;
            font-style: italic;
            line-height: 1.4;
        }

        .menu-buttons {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .mode-buttons-container {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 15px;
        }

        @media (max-width: 480px) {
            .mode-buttons-container {
                flex-direction: column;
            }
        }

        .mode-btn {
            flex: 1;
            padding: 15px 10px;
            border: none;
            border-radius: 15px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            min-height: 120px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .btn-simple {
            background: #FBB728;
            color: white;
        }

        .btn-hard {
            background: #FBB728;
            color: white;
        }

        .mode-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .mode-btn:active {
            transform: translateY(-1px);
        }

        .mode-icon {
            max-height: 60px;
            margin-bottom: 8px;
        }

        .menu-btn {
            padding: 15px 30px;
            border: none;
            border-radius: 50px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-rules {
            background: #F06B04;
            color: white;
            max-width: 200px;
            margin: 0 auto;
        }

        .menu-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .menu-btn:active {
            transform: translateY(-1px);
        }

        /* Bouton THE RIGHT BEEP */
        .beep-button-container {
            text-align: center;
            margin: 25px 0;
        }

        .beep-btn {
            background: linear-gradient(45deg, #F06B04, #FBB728);
            color: white;
            padding: 20px 30px;
            border: none;
            border-radius: 15px;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            animation: pulse-glow 2s infinite;
        }

        .beep-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
            background: linear-gradient(45deg, #FBB728, #F06B04);
        }

        .beep-btn:active {
            transform: translateY(-1px);
        }

        @keyframes pulse-glow {
            0%, 100% { 
                box-shadow: 0 5px 15px rgba(240, 107, 4, 0.4);
            }
            50% { 
                box-shadow: 0 5px 25px rgba(240, 107, 4, 0.8);
            }
        }

        /* Fl√®che de retour am√©lior√©e */
        .back-btn {
            background: #F06B04;
            color: white;
            padding: 15px 25px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            margin-bottom: 20px;
            transition: all 0.3s ease;
            font-size: 18px;
            font-weight: bold;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            border: 2px solid white;
            align-self: flex-start;
            margin-left: 20px;
        }

        .back-btn:hover {
            background: #FBB728;
            transform: translateY(-2px);
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.4);
        }

        /* Rules View */
        .rules-content {
            text-align: left;
            background: transparent;
            padding: 25px;
            border-radius: 10px;
            margin-top: 20px;
            max-height: 60vh;
            overflow-y: auto;
            color: white;
        }

        .rules-content h2 {
            color: white;
            margin-bottom: 20px;
            text-align: center;
            font-size: 28px;
        }

        .rules-content h3 {
            color: #FBB728;
            margin: 20px 0 10px 0;
            font-size: 20px;
        }

        .rules-content p {
            margin-bottom: 15px;
            line-height: 1.6;
            color: white;
        }

        .rules-content ul {
            margin-left: 20px;
            margin-bottom: 15px;
            color: white;
        }

        .rules-content li {
            margin-bottom: 10px;
            color: white;
            line-height: 1.5;
        }

        .rules-content ol {
            margin-left: 20px;
            margin-bottom: 15px;
            color: white;
        }

        .game-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            flex-wrap: wrap;
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #F06B04;
        }

        .game-info p {
            margin: 0;
            font-size: 16px;
            color: white;
        }

        /* Countdown View */
        .countdown-view {
            background: #F06B04;
        }

        .countdown-number {
            font-size: 120px;
            font-weight: bold;
            animation: pulse 1s ease-in-out;
        }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.7; }
            100% { transform: scale(1); opacity: 1; }
        }

        .countdown-text {
            font-size: 24px;
            margin-top: 20px;
            font-weight: bold;
        }

        .countdown-subtext {
            font-size: 18px;
            margin-top: 10px;
            font-weight: bold;
            color: white;
        }

        /* Game View */
        .game-view {
            background: #F06B04;
            transition: background-color 0.5s ease;
        }

        .blue-screen {
            background: #2B9FC6 !important;
        }

        .red-screen {
            background: #A1071F;
        }

        .game-container {
            background: transparent;
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            max-width: 600px;
            width: 90%;
            color: #333;
        }

        .question-display {
            font-size: 24px;
            margin-bottom: 30px;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1.4;
            padding: 20px;
            color: white;
        }

        .answers-display {
            margin: 30px 0;
            text-align: left;
        }

        .answer-item {
            padding: 15px;
            font-size: 16px;
            color: white;
        }

        .answer-item.correct {
            color: #FBB728;
            font-weight: bold;
        }

        .answer-item.incorrect {
            color: #FFFFFF;
        }

        .answer-item.selectable {
            cursor: pointer;
        }

        .answer-item.selectable:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .answer-item.disabled {
            cursor: not-allowed;
            opacity: 0.6;
        }

        .status-message {
            font-size: 20px;
            margin: 30px 0;
            min-height: 30px;
            font-weight: bold;
            padding: 15px;
            border-radius: 10px;
            background: transparent !important;
        }

        .thinking {
            color: #FFFFFF !important;
        }

        .blue-screen-message {
            color: white;
            font-size: 32px;
            font-weight: bold;
            text-align: center;
            background: transparent !important;
        }

        .red-screen-message {
            color: white;
            font-size: 32px;
            font-weight: bold;
            text-align: center;
            background: transparent !important;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .controls {
            margin-top: 30px;
        }

        .next-btn {
            background: linear-gradient(45deg, #00b894, #00a085);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .next-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .hidden {
            display: none;
        }

        /* Penalty Message */
        .penalty-message {
            color: #ff6b6b;
            font-weight: bold;
            font-size: 18px;
            margin: 10px 0;
        }

        /* Trick Message */
        .trick-message {
            color: #ff6b6b;
            font-weight: bold;
            font-size: 18px;
            margin: 10px 0;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Game Over Screen */
        .game-over {
            text-align: center;
            padding: 20px;
            color: white;
        }

        .game-over h2 {
            font-size: 36px;
            margin-bottom: 20px;
            color: white;
        }

        .game-over p {
            font-size: 24px;
            margin-bottom: 30px;
            color: white;
        }

        /* Team Logo in Main Menu */
        .menu-team-logo {
            max-width: 120px;
            width: 30%;
            height: auto;
            margin-top: 20px;
            opacity: 0.7;
        }

        /* Rules View Updates */
        .rules-subtitle {
            font-size: 18px;
            color: white;
            margin-bottom: 20px;
            text-align: center;
        }

        .section-divider {
            text-align: center;
            margin: 25px 0;
            padding: 10px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            border-radius: 10px;
            color: white;
        }

        .section-divider h3 {
            margin: 0;
            color: white;
        }

        .rules-content h4 {
            color: white;
            margin: 20px 0 10px 0;
            font-size: 18px;
        }

        .gameplay-steps {
            margin-left: 0;
            padding-left: 20px;
            color: white;
        }

        .gameplay-steps li {
            margin-bottom: 15px;
            line-height: 1.6;
            color: white;
        }

        .gameplay-steps strong {
            color: #FBB728;
        }

        /* Remove backgrounds from other game menus */
        #rules-view .menu-container,
        #simple-game-view .game-container,
        #hard-game-view .game-container,
        #game-over-view .menu-container {
            background: transparent;
            box-shadow: none;
        }

        /* Assurer que tous les textes "Listen and wait" et "Tap to continue" sont en blanc */
        #statusMessage,
        #hardStatusMessage {
            color: #FFFFFF !important;
        }
    </style>
</head>
<body>
    <!-- Orientation Message -->
    <div class="orientation-message" id="orientation-message">
        <div class="orientation-icon">üì±</div>
        <div class="orientation-text">Please rotate your device</div>
        <div class="orientation-subtext">This game works best in landscape mode</div>
    </div>

    <!-- Background Music -->
    <audio id="backgroundMusic" loop>
        <source src="audio/background_music.mp3" type="audio/mpeg">
    </audio>

    <!-- Audio Elements -->
    <audio id="bipSound" preload="auto">
        <source src="audio/beepers/correct/real_buzzer.mp3" type="audio/mpeg">
    </audio>
    <audio id="fakebipSound1" preload="auto">
        <source src="audio/beepers/incorrect/fake_buzzer_1.mp3" type="audio/mpeg">
    </audio>
    <audio id="fakebipSound2" preload="auto">
        <source src="audio/beepers/incorrect/fake_buzzer_2.mp3" type="audio/mpeg">
    </audio>
    <audio id="fakebipSound3" preload="auto">
        <source src="audio/beepers/incorrect/fake_buzzer_3.mp3" type="audio/mpeg">
    </audio>
    <audio id="fakebipSound4" preload="auto">
        <source src="audio/beepers/incorrect/fake_buzzer_4.mp3" type="audio/mpeg">
    </audio>
    <audio id="ambienceMusic" preload="auto"></audio>
    <audio id="errorSound" preload="auto"></audio>
    <audio id="winSound" preload="auto"></audio>
    <audio id="trickSound" preload="auto"></audio>

    <!-- Splash Screen -->
    <div class="view active" id="splash-screen">
        <div class="splash-container">
            <img src="images/game_logo.png" alt="EL BEEPER Logo" class="splash-logo" id="splashLogo">
            <div class="splash-text">Loading test 9...</div>
            <img src="images/team_logo.png" alt="Team Logo" class="splash-team-logo" id="splashTeamLogo">
        </div>
    </div>

    <!-- Sound On Screen -->
    <div class="view" id="sound-on-screen">
        <div class="sound-on-container">
            <img src="images/sound_on.png" alt="Turn Sound On" class="sound-on-icon" id="soundOnIcon">
            <h1 class="sound-on-title">TURN YOUR SOUND ON!</h1>
            <button class="continue-btn" onclick="startBackgroundMusic(); showView('main-menu')">
                Continue to Game
            </button>
        </div>
    </div>

    <!-- Main Menu -->
    <div class="view" id="main-menu">
        <div class="menu-container">
            <div class="logo-space">
                <img src="images/game_logo.png" alt="EL BEEPER Logo" class="menu-logo" id="menuLogo">
            </div>
            
            <div class="slogan-space">
                <strong><p class="slogan" id="slogan">Be the fastest!<br>Be the smartest!<br>Beat the BEEP!</p></strong>
            </div>
            
            <div class="menu-buttons">
                <button class="menu-btn btn-rules" onclick="showView('rules-view')">
                    Rules
                </button>
                
                <div class="mode-buttons-container">
                    <button class="mode-btn btn-simple" onclick="startSimpleGame()">
                        <img src="images/simple_mode_icon.png" alt="Simple Mode Icon" class="mode-icon">
                        Simple Mode
                    </button>
                    <button class="mode-btn btn-hard" onclick="startHardGame()">
                        <img src="images/hard_mode_icon.png" alt="Hard Mode Icon" class="mode-icon">
                        Hard Mode
                    </button>
                </div>
            </div>
            
            <p>A game developed by:</p>

            <img src="images/team_logo.png" alt="Team Logo" class="menu-team-logo" id="menuTeamLogo">

            <p>MDS - ANNECY</p>
        </div>
    </div>

    <!-- Rules View -->
    <div class="view" id="rules-view">
        <div class="menu-container">
            <button class="back-btn" onclick="showView('main-menu')">‚Üê Back to Menu</button>
            <div class="rules-content">
                <h2>RULES</h2>
                
                <p class="rules-subtitle"><strong>Collect the most tokens by slapping the target and answering correctly:</strong></p>
                
                <div class="game-info">
                    <p><strong>7 to 77 years old<br>15 min ‚Ä¢ 120 questions<br>2-6 players</strong></p>
                </div>
                
                <h3>SETUP</h3>
                <ol>
                    <li>Place the Target Carpet in the center of the table.</li>
                    <li>Place the tablet with the El Beeper app next to the target visible to everyone!</li>
                    <li>Each player/team must take a "Score Card".</li>
                    <li>Round Choice: Press the "THE RIGHT BEEP" button below to hear the correct Beep - Memorize it!</li>
                    <li>Choose a difficulty on the app: Normal or Hard</li>
                </ol>
                
                <!-- Bouton THE RIGHT BEEP -->
                <div class="beep-button-container">
                    <button class="beep-btn" onclick="playBeepSound()">
                        üéØ THE RIGHT BEEP - CLICK TO HEAR
                    </button>
                </div>
                
                <h4>How to Play</h4>
                <p><em>The game is played in rounds of questions controlled by the app.</em></p>
                
                <ol class="gameplay-steps">
                    <li>
                        <strong>READ:</strong> The question appears on the screen with its Token Value (1, 2, or 3). 
                        Players read the question themselves.
                    </li>
                    <li>
                        <strong>WAIT:</strong> Wait for the screen to turn RED. Wait for the signal.
                    </li>
                    <li>
                        <strong>SLAP:</strong> As soon as the screen turns BLUE and you hear the BEEP, slap the target!
                        <ul>
                            <li>The first hand on the target gets to answer.</li>
                        </ul>
                    </li>
                    <li>
                        <strong>ANSWER:</strong>
                        <ul>
                            <li>Say your answer aloud.</li>
                            <li>Tap the game screen to reveal the correct answer.</li>
                            <li><strong>Correct:</strong> Take the number of tokens shown on the screen (1, 2, or 3).</li>
                            <li><strong>Wrong:</strong> You are out for this round. The next player who slapped gets to guess.</li>
                        </ul>
                    </li>
                </ol>
                
                <h3>HARD MODE</h3>
                <ul>
                    <li>The app will try to trick you with False Signals.</li>
                    <li>Wrong Colors (other than Blue)</li>
                    <li>Wrong Sounds (Buzzers or verbs)</li>
                    <li>Do NOT slap unless it is the Correct Beep AND Blue Screen.</li>
                    <li><strong>Penalty:</strong> If you slap on a false signal, you must sit out the next round.</li>
                </ul>
                
                <h3>WINNING</h3>
                <p>The game ends immediately when:</p>
                <ul>
                    <li>A player reaches 20 Points (Tokens), OR</li>
                    <li>All questions have been played.</li>
                </ul>
                <p><strong>The player with the most tokens wins!</strong></p>
            </div>
        </div>
    </div>

    <!-- Countdown View -->
    <div class="view countdown-view" id="countdown-view">
        <div class="countdown-number" id="countdownNumber">3</div>
        <div class="countdown-text">ARE YOU READY?</div>
        <div class="countdown-subtext">Turn your phone</div>
    </div>

    <!-- Simple Game View -->
    <div class="view game-view" id="simple-game-view">
        <div class="game-container">
            <button class="back-btn" onclick="returnToMenu()">‚Üê Back to Menu</button>
            <h1>Simple Mode</h1>
            
            <div class="question-display" id="questionDisplay">
                The question will appear here...
            </div>

            <div class="answers-display" id="answersDisplay">
                <!-- Answers will be displayed here -->
            </div>

            <div class="status-message thinking" id="statusMessage">
                Listen and wait.
            </div>

            <div class="controls">
                <button class="next-btn" onclick="nextQuestion()" id="nextButton">
                    Next Question
                </button>
            </div>
        </div>
    </div>

    <!-- Hard Game View -->
    <div class="view game-view" id="hard-game-view">
        <div class="game-container">
            <button class="back-btn" onclick="returnToMenu()">‚Üê Back to Menu</button>
            <h1>Hard Mode</h1>
            
            <div class="question-display" id="hardQuestionDisplay">
                The question will appear here...
            </div>

            <div class="answers-display" id="hardAnswersDisplay">
                <!-- Answers will be displayed here -->
            </div>

            <div class="status-message thinking" id="hardStatusMessage">
                Listen and wait
            </div>

            <div class="penalty-message" id="penaltyMessage">
                <!-- Penalty messages will appear here -->
            </div>

            <div class="trick-message" id="trickMessage">
                <!-- Trick messages will appear here -->
            </div>

            <div class="controls">
                <button class="next-btn" onclick="nextHardQuestion()" id="hardNextButton">
                    Next Question
                </button>
            </div>
        </div>
    </div>

    <!-- Game Over View -->
    <div class="view" id="game-over-view">
        <div class="menu-container game-over">
            <h2>üéâ Congratulations! üéâ</h2>
            <p>You've collected <span id="finalScore">20</span> files!</p>
            <p>You are the EL BEEPER champion!</p>
            <button class="menu-btn btn-hard" onclick="showView('main-menu')">
                Play Again
            </button>
        </div>
    </div>

    <script>
        // Orientation Detection
        function checkOrientation() {
            const orientationMessage = document.getElementById('orientation-message');
            const isPortrait = window.innerHeight > window.innerWidth;
            
            if (isPortrait && window.innerWidth < 768) {
                orientationMessage.classList.add('active');
            } else {
                orientationMessage.classList.remove('active');
            }
        }

        // Initial check
        checkOrientation();

        // Listen for orientation changes
        window.addEventListener('resize', checkOrientation);
        window.addEventListener('orientationchange', checkOrientation);

        // Game variables
        let currentTimer;
        let timeLeft;
        const thinkingTime = 10;
        const blueScreenTime = 5;
        let currentQuestionIndex = 0;
        let isMusicPlaying = false;
        let countdownInterval;

        // Hard Mode specific variables
        let isBlueScreenActive = false;
        let canAnswer = false;
        let playerScore = 0;
        let penaltyActive = false;
        let isTrickScreen = false;

        // DOM Elements
        const questionDisplay = document.getElementById('questionDisplay');
        const answersDisplay = document.getElementById('answersDisplay');
        const statusMessage = document.getElementById('statusMessage');
        const bipSound = document.getElementById('bipSound');
        const countdownNumber = document.getElementById('countdownNumber');
        const nextButton = document.getElementById('nextButton');
        const gameView = document.getElementById('simple-game-view');
        
        // Hard Mode DOM Elements
        const hardQuestionDisplay = document.getElementById('hardQuestionDisplay');
        const hardAnswersDisplay = document.getElementById('hardAnswersDisplay');
        const hardStatusMessage = document.getElementById('hardStatusMessage');
        const hardNextButton = document.getElementById('hardNextButton');
        const hardGameView = document.getElementById('hard-game-view');
        const penaltyMessage = document.getElementById('penaltyMessage');
        const trickMessage = document.getElementById('trickMessage');
        const gameOverView = document.getElementById('game-over-view');

        // Logo elements
        const splashLogo = document.getElementById('splashLogo');
        const menuLogo = document.getElementById('menuLogo');
        const splashTeamLogo = document.getElementById('splashTeamLogo');
        const menuTeamLogo = document.getElementById('menuTeamLogo');
        const soundOnIcon = document.getElementById('soundOnIcon');

        // Background Music Function
        function startBackgroundMusic() {
            const backgroundMusic = document.getElementById('backgroundMusic');
            backgroundMusic.volume = 0.3;
            backgroundMusic.play().catch(e => {
                console.log("Autoplay prevented - user interaction required");
            });
        }

        // Fonction pour jouer le vrai buzzer quand l'√©cran devient bleu
        function playRealBuzzer() {
            const realBuzzer = document.getElementById('bipSound');
            realBuzzer.currentTime = 0;
            realBuzzer.play().catch(e => {
                console.log("Real buzzer error:", e);
            });
        }

        // Fonction pour jouer un faux buzzer al√©atoire
        function playRandomFakeBuzzer() {
            const fakeBuzzers = [
                document.getElementById('fakebipSound1'),
                document.getElementById('fakebipSound2'), 
                document.getElementById('fakebipSound3'),
                document.getElementById('fakebipSound4')
            ];
            
            // Choisir un buzzer al√©atoire
            const randomIndex = Math.floor(Math.random() * fakeBuzzers.length);
            const randomFakeBuzzer = fakeBuzzers[randomIndex];
            
            randomFakeBuzzer.currentTime = 0;
            randomFakeBuzzer.play().catch(e => {
                console.log("Fake buzzer error:", e);
            });
        }

        // Fonction pour choisir une couleur al√©atoire (autre que bleu et rouge)
        function getRandomTrickColor() {
            const trickColors = [
                '#FFD700', // Or
                '#32CD32', // Vert lime
                '#8A2BE2', // Violet
                '#FF69B4', // Rose
                '#00CED1', // Turquoise
                '#FF8C00', // Orange fonc√©
                '#9370DB'  // Violet moyen
            ];
            
            const randomIndex = Math.floor(Math.random() * trickColors.length);
            return trickColors[randomIndex];
        }

        // Function to play beep sound (pour le bouton dans les r√®gles)
        function playBeepSound() {
            playRealBuzzer();
        }

        // Sample questions
        const sampleQuestions = [
            {
                question: "What is the capital of France?",
                answers: [
                    { text: "London", correct: false },
                    { text: "Paris", correct: true },
                    { text: "Berlin", correct: false },
                    { text: "Madrid", correct: false }
                ]
            },
            {
                question: "How much is 2 + 2?",
                answers: [
                    { text: "3", correct: false },
                    { text: "4", correct: true },
                    { text: "5", correct: false },
                    { text: "6", correct: false }
                ]
            },
            {
                question: "What is the color of the sky on a clear day?",
                answers: [
                    { text: "Red", correct: false },
                    { text: "Green", correct: false },
                    { text: "Blue", correct: true },
                    { text: "Yellow", correct: false }
                ]
            }
        ];

        // Function to change view
        function showView(viewId) {
            document.querySelectorAll('.view').forEach(view => {
                view.classList.remove('active');
            });
            document.getElementById(viewId).classList.add('active');
        }

        // Start simple game
        function startSimpleGame() {
            showView('countdown-view');
            startCountdown();
        }

        // Start hard game
        function startHardGame() {
            showView('countdown-view');
            startCountdown('hard');
        }

        // Return to menu from game
        function returnToMenu() {
            if (confirm("Do you really want to return to the menu? Your progress will be lost.")) {
                clearInterval(currentTimer);
                showView('main-menu');
            }
        }

        // Start countdown
        function startCountdown(mode = 'simple') {
            let count = 3;
            countdownNumber.textContent = count;
                    
            countdownInterval = setInterval(() => {
                count--;
                countdownNumber.textContent = count;
                
                if (count <= 0) {
                    clearInterval(countdownInterval);
                    if (mode === 'hard') {
                        startHardGameSession();
                    } else {
                        startSimpleGameSession();
                    }
                }
            }, 1000);
        }

        // Start simple game session
        function startSimpleGameSession() {
            showView('simple-game-view');
            currentQuestionIndex = 0;
            startNewQuestion();
        }

        // Start hard game session
        function startHardGameSession() {
            showView('hard-game-view');
            currentQuestionIndex = 0;
            startNewHardQuestion();
        }

        // Start a new question for simple mode
        function startNewQuestion() {
            if (currentQuestionIndex >= sampleQuestions.length) {
                currentQuestionIndex = 0;
            }

            const question = sampleQuestions[currentQuestionIndex];
            currentQuestionIndex++;

            // Display the question
            questionDisplay.textContent = question.question;
            
            // Display all answers
            answersDisplay.innerHTML = '';
            question.answers.forEach((answer, index) => {
                const answerElement = document.createElement('div');
                answerElement.className = 'answer-item incorrect';
                answerElement.textContent = `${String.fromCharCode(65 + index)}) ${answer.text}`;
                answersDisplay.appendChild(answerElement);
            });

            // Reset interface
            statusMessage.textContent = "Listen and wait.";
            statusMessage.className = 'status-message thinking';
            nextButton.style.display = 'none';
            gameView.classList.remove('blue-screen');

            startTimer();
        }

        // Start a new question for hard mode
        function startNewHardQuestion() {
            if (currentQuestionIndex >= sampleQuestions.length) {
                currentQuestionIndex = 0;
            }

            const question = sampleQuestions[currentQuestionIndex];
            currentQuestionIndex++;

            // Reset game state
            isBlueScreenActive = false;
            canAnswer = false;
            penaltyActive = false;
            isTrickScreen = false;
            penaltyMessage.textContent = '';
            trickMessage.textContent = '';

            // Display the question
            hardQuestionDisplay.textContent = question.question;
            
            // Display all answers
            hardAnswersDisplay.innerHTML = '';
            question.answers.forEach((answer, index) => {
                const answerElement = document.createElement('div');
                answerElement.className = 'answer-item incorrect disabled';
                answerElement.textContent = `${String.fromCharCode(65 + index)}) ${answer.text}`;
                hardAnswersDisplay.appendChild(answerElement);
            });

            // Reset interface
            hardStatusMessage.textContent = "Listen and wait";
            hardStatusMessage.className = 'status-message thinking';
            hardNextButton.style.display = 'none';
            hardGameView.classList.remove('blue-screen');
            hardGameView.classList.remove('red-screen');

            startHardTimer();
        }

        // Timer for simple mode
        function startTimer() {
            timeLeft = thinkingTime;

            currentTimer = setInterval(() => {
                timeLeft--;

                if (timeLeft <= 0) {
                    clearInterval(currentTimer);
                    timeUp();
                }
            }, 1000);
        }

        // Timer for hard mode
        function startHardTimer() {
            timeLeft = thinkingTime;

            currentTimer = setInterval(() => {
                timeLeft--;

                if (timeLeft <= 0) {
                    clearInterval(currentTimer);
                    hardTimeUp();
                }
            }, 1000);
        }

        // Time's up for simple mode
        function timeUp() {
            // Show blue screen
            showBlueScreen();
        }

        // Time's up for hard mode
        function hardTimeUp() {
            // 40% de chance d'√©cran bleu normal, 60% de chance de pi√®ge
            const isNormalScreen = Math.random() < 0.4;
            
            if (isNormalScreen) {
                // √âcran bleu normal avec vrai buzzer
                showHardBlueScreen();
            } else {
                // Pi√®ge : soit √©cran rouge, soit autre couleur avec faux buzzer
                const isRedTrick = Math.random() < 0.5;
                
                if (isRedTrick) {
                    showRedScreen();
                } else {
                    showColorTrickScreen();
                }
            }
        }

        // Show blue screen for simple mode
        function showBlueScreen() {
            gameView.classList.add('blue-screen');
            statusMessage.textContent = "Slap and tell!";
            statusMessage.className = 'blue-screen-message';
            
            // Jouer le vrai buzzer automatiquement
            setTimeout(() => {
                playRealBuzzer();
            }, 100); // Petit d√©lai pour s'assurer que l'√©cran est bleu
            
            // After blueScreenTime seconds, show the answer
            setTimeout(() => {
                showCorrectAnswer();
            }, blueScreenTime * 1000);
        }

        // Show blue screen for hard mode
        function showHardBlueScreen() {
            hardGameView.classList.add('blue-screen');
            hardStatusMessage.textContent = "SLAP AND TELL!";
            hardStatusMessage.className = 'blue-screen-message';
            
            isBlueScreenActive = true;
            canAnswer = true;
            
            // Jouer le vrai buzzer automatiquement
            setTimeout(() => {
                playRealBuzzer();
            }, 100);
            
            // Enable answer selection
            const answerElements = hardAnswersDisplay.querySelectorAll('.answer-item');
            answerElements.forEach(element => {
                element.classList.remove('disabled');
                element.classList.add('selectable');
            });
            
            // After blueScreenTime seconds, disable answering and show correct answer
            setTimeout(() => {
                canAnswer = false;
                isBlueScreenActive = false;
                showHardCorrectAnswer();
            }, blueScreenTime * 1000);
        }

        // Show red screen (trick) for hard mode
        function showRedScreen() {
            hardGameView.classList.add('red-screen');
            hardStatusMessage.textContent = "‚è∞ Time's up!";
            hardStatusMessage.className = 'red-screen-message';
            trickMessage.textContent = "‚ö†Ô∏è TRICK! Wait for the BLUE screen!";
            
            // After a shorter time, switch to blue screen
            setTimeout(() => {
                hardGameView.classList.remove('red-screen');
                hardGameView.classList.add('blue-screen');
                hardStatusMessage.className = 'blue-screen-message';
                trickMessage.textContent = "";
                
                // Enable answering on blue screen
                isBlueScreenActive = true;
                canAnswer = true;
                
                // Jouer le vrai buzzer
                playRealBuzzer();
                
                // Enable answer selection
                const answerElements = hardAnswersDisplay.querySelectorAll('.answer-item');
                answerElements.forEach(element => {
                    element.classList.remove('disabled');
                    element.classList.add('selectable');
                });
                
                // Then show the answer after the remaining time
                setTimeout(() => {
                    canAnswer = false;
                    isBlueScreenActive = false;
                    showHardCorrectAnswer();
                }, (blueScreenTime - 1.5) * 1000);
            }, 1500);
        }

        // Nouvelle fonction pour l'√©cran de pi√®ge avec couleur al√©atoire
        function showColorTrickScreen() {
            // Choisir une couleur al√©atoire
            const trickColor = getRandomTrickColor();
            
            // Appliquer la couleur √† l'√©cran
            hardGameView.style.background = trickColor;
            hardStatusMessage.textContent = "‚è∞ Time's up!";
            hardStatusMessage.className = 'red-screen-message';
            trickMessage.textContent = "‚ö†Ô∏è TRICK! Wrong color!";
            
            // Jouer un faux buzzer al√©atoire
            setTimeout(() => {
                playRandomFakeBuzzer();
            }, 100);
            
            // Apr√®s un court d√©lai, passer √† l'√©cran bleu
            setTimeout(() => {
                hardGameView.style.background = ''; // R√©initialiser la couleur
                hardGameView.classList.add('blue-screen');
                hardStatusMessage.className = 'blue-screen-message';
                trickMessage.textContent = "";
                
                // Enable answering on blue screen
                isBlueScreenActive = true;
                canAnswer = true;
                
                // Jouer le vrai buzzer
                playRealBuzzer();
                
                // Enable answer selection
                const answerElements = hardAnswersDisplay.querySelectorAll('.answer-item');
                answerElements.forEach(element => {
                    element.classList.remove('disabled');
                    element.classList.add('selectable');
                });
                
                // Then show the answer after the remaining time
                setTimeout(() => {
                    canAnswer = false;
                    isBlueScreenActive = false;
                    showHardCorrectAnswer();
                }, (blueScreenTime - 1.5) * 1000);
            }, 1500);
        }

        // Show correct answer for simple mode
        function showCorrectAnswer() {
            const question = sampleQuestions[currentQuestionIndex - 1];
            
            // Mark the correct answer
            const answerElements = answersDisplay.querySelectorAll('.answer-item');
            question.answers.forEach((answer, index) => {
                if (answer.correct) {
                    answerElements[index].className = 'answer-item correct';
                }
            });

            statusMessage.textContent = "Tap to continue.";
            statusMessage.className = 'status-message thinking';
            gameView.classList.remove('blue-screen');
            nextButton.style.display = 'block';
        }

        // Show correct answer for hard mode
        function showHardCorrectAnswer() {
            const question = sampleQuestions[currentQuestionIndex - 1];
            
            // Mark the correct answer
            const answerElements = hardAnswersDisplay.querySelectorAll('.answer-item');
            question.answers.forEach((answer, index) => {
                if (answer.correct) {
                    answerElements[index].className = 'answer-item correct';
                }
            });

            hardStatusMessage.textContent = "Tap to continue.";
            hardStatusMessage.className = 'status-message thinking';
            hardGameView.classList.remove('blue-screen');
            hardGameView.classList.remove('red-screen');
            hardNextButton.style.display = 'block';
            penaltyMessage.textContent = "";
            trickMessage.textContent = "";
        }

        // Next question for simple mode
        function nextQuestion() {
            startNewQuestion();
        }

        // Next question for hard mode
        function nextHardQuestion() {
            startNewHardQuestion();
        }

        // Handle logo loading and splash screen
        function handleLogoLoad() {
            setTimeout(() => {
                showView('sound-on-screen');
            }, 3000);
        }

        function handleLogoError() {
            splashLogo.style.display = 'none';
            document.querySelector('.splash-text').textContent = 'EL BEEPER';
            setTimeout(() => {
                showView('sound-on-screen');
            }, 3000);
        }

        // Set up logo event listeners
        splashLogo.onload = handleLogoLoad;
        splashLogo.onerror = handleLogoError;
        menuLogo.onerror = function() {
            menuLogo.style.display = 'none';
        };
        
        // Set up team logo event listeners
        splashTeamLogo.onerror = function() {
            splashTeamLogo.style.display = 'none';
        };
        menuTeamLogo.onerror = function() {
            menuTeamLogo.style.display = 'none';
        };

        // Set up sound on icon event listener
        soundOnIcon.onerror = function() {
            soundOnIcon.style.display = 'none';
            document.querySelector('.sound-on-title').innerHTML = 'üîä TURN YOUR SOUND ON!';
        };

        // Check if logo has already loaded
        if (splashLogo.complete) {
            handleLogoLoad();
        }
    </script>
</body>
</html>