<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EL BEEPER - The Ultimate Quiz Game</title>
    <style>
        /* All previous CSS remains the same */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            transition: all 0.5s ease;
        }

        .view {
            display: none;
            width: 100%;
            height: 100vh;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 20px;
        }

        .view.active {
            display: flex;
        }

        /* Main Menu */
        .menu-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            text-align: center;
            max-width: 500px;
            width: 90%;
            color: #333;
        }

        .logo-space {
            margin-bottom: 20px;
        }

        .logo {
            width: 120px;
            height: 120px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            border-radius: 50%;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 48px;
            font-weight: bold;
        }

        .slogan-space {
            margin-bottom: 30px;
        }

        .slogan {
            font-size: 18px;
            color: #666;
            font-style: italic;
            line-height: 1.4;
        }

        .menu-buttons {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .menu-btn {
            padding: 15px 30px;
            border: none;
            border-radius: 50px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-rules {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
        }

        .btn-simple {
            background: linear-gradient(45deg, #00b894, #00a085);
            color: white;
        }

        .btn-hard {
            background: linear-gradient(45deg, #6c5ce7, #5b4bc4);
            color: white;
        }

        .menu-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .menu-btn:active {
            transform: translateY(-1px);
        }

        .back-btn {
            background: #636e72;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            background: #2d3436;
        }

        /* Rules View */
        .rules-content {
            text-align: left;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-top: 20px;
            max-height: 60vh;
            overflow-y: auto;
        }

        .rules-content h2 {
            color: #333;
            margin-bottom: 20px;
            text-align: center;
            font-size: 28px;
        }

        .rules-content h3 {
            color: #ff6b6b;
            margin: 20px 0 10px 0;
            font-size: 20px;
        }

        .rules-content p {
            margin-bottom: 15px;
            line-height: 1.6;
            color: #555;
        }

        .rules-content ul {
            margin-left: 20px;
            margin-bottom: 15px;
        }

        .rules-content li {
            margin-bottom: 10px;
            color: #555;
            line-height: 1.5;
        }

        .game-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .info-item {
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 15px;
            border-radius: 10px;
            margin: 5px;
            flex: 1;
            min-width: 120px;
        }

        .info-item h4 {
            color: #ff6b6b;
            margin-bottom: 5px;
        }

        /* Countdown View */
        .countdown-view {
            background: linear-gradient(135deg, #00b894 0%, #00a085 100%);
        }

        .countdown-number {
            font-size: 120px;
            font-weight: bold;
            animation: pulse 1s ease-in-out;
        }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.7; }
            100% { transform: scale(1); opacity: 1; }
        }

        .countdown-text {
            font-size: 24px;
            margin-top: 20px;
            font-weight: bold;
        }

        /* Game View */
        .game-view {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: background-color 0.5s ease;
        }

        .blue-screen {
            background: linear-gradient(135deg, #0077b6 0%, #0096c7 100%) !important;
        }

        .game-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            text-align: center;
            max-width: 600px;
            width: 90%;
            color: #333;
        }

        .question-display {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 30px;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1.4;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 15px;
            border: 3px solid #e9ecef;
        }

        .answers-display {
            margin: 30px 0;
            text-align: left;
        }

        .answer-item {
            padding: 15px;
            margin: 10px 0;
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .answer-item.correct {
            background: #d4edda;
            border-color: #28a745;
            color: #155724;
            font-weight: bold;
        }

        .answer-item.incorrect {
            background: #f8f9fa;
            border-color: #e9ecef;
            color: #666;
        }

        .answer-item.selectable {
            cursor: pointer;
        }

        .answer-item.selectable:hover {
            background: #e9ecef;
            transform: translateY(-2px);
        }

        .answer-item.disabled {
            cursor: not-allowed;
            opacity: 0.6;
        }

        .status-message {
            font-size: 20px;
            margin: 30px 0;
            min-height: 30px;
            font-weight: bold;
            padding: 15px;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.9);
        }

        .thinking {
            color: #667eea;
        }

        .blue-screen-message {
            color: white;
            font-size: 32px;
            font-weight: bold;
            text-align: center;
        }

        .controls {
            margin-top: 30px;
        }

        .next-btn {
            background: linear-gradient(45deg, #00b894, #00a085);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .next-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .hidden {
            display: none;
        }

        /* Music Controls */
        .music-controls {
            margin-top: 20px;
        }

        .btn-music {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 8px 15px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 14px;
        }

        /* Player Score Display */
        .score-display {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .player-score {
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 15px;
            border-radius: 10px;
            margin: 5px;
            flex: 1;
            min-width: 120px;
        }

        .player-score h4 {
            color: #6c5ce7;
            margin-bottom: 5px;
        }

        .player-score.active {
            border: 2px solid #6c5ce7;
            background: rgba(108, 92, 231, 0.1);
        }

        /* Penalty Message */
        .penalty-message {
            color: #ff6b6b;
            font-weight: bold;
            font-size: 18px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <!-- Main Menu -->
    <div class="view active" id="main-menu">
        <div class="menu-container">
            <div class="logo-space">
                <div class="logo">EB</div>
            </div>
            
            <div class="slogan-space">
                <p class="slogan" id="slogan">Test your knowledge in Simple Mode or challenge yourself in Hard Mode!</p>
            </div>
            
            <div class="menu-buttons">
                <button class="menu-btn btn-rules" onclick="showView('rules-view')">
                    üìã Rules
                </button>
                <button class="menu-btn btn-simple" onclick="startSimpleGame()">
                    üéÆ Simple Mode
                </button>
                <button class="menu-btn btn-hard" onclick="startHardGame()">
                    üíÄ Hard Mode
                </button>
            </div>
        </div>
    </div>

    <!-- Rules View -->
    <div class="view" id="rules-view">
        <div class="menu-container">
            <button class="back-btn" onclick="showView('main-menu')">‚Üê Back</button>
            <div class="rules-content">
                <h2>EL BEEPER RULES</h2>
                
                <div class="game-info">
                    <div class="info-item">
                        <h4>AGE</h4>
                        <p>12 years old +</p>
                    </div>
                    <div class="info-item">
                        <h4>DURATION</h4>
                        <p>15 min</p>
                    </div>
                    <div class="info-item">
                        <h4>PLAYERS</h4>
                        <p>2-6 players</p>
                    </div>
                </div>
                
                <h3>THE OBJECTIVE</h3>
                <p>First to win 20 files, wins and ends the game.</p>
                
                <h3>GAME MODES</h3>
                <p>2 modes: Simple mode and Hard mode</p>
                
                <h3>HOW TO PLAY</h3>
                <ol>
                    <li>Firstly, choose your folder color. This folder will contain "files", which will be your points.</li>
                    <li>Then, choose a game mode: simple or hard.</li>
                    <li>The game will ask a question, you'll have to answer it as soon as you hear the sound "BEEP", by slapping (and leaving) your hand on the carpet target.</li>
                    <li><strong>ATTENTION:</strong> In hard mode if you slap your hand before the "BEEP" or the color is anything but blue, you can't play for this turn.</li>
                    <li>The first player who answers the question. If the answer is right, you win "files" (depending on the number of points the question made you earn). If the answer is wrong, you don't gain files at all.</li>
                </ol>
                
                <p><strong>The first to win 20 files, wins and ends the game.</strong></p>
            </div>
        </div>
    </div>

    <!-- Countdown View -->
    <div class="view countdown-view" id="countdown-view">
        <div class="countdown-number" id="countdownNumber">3</div>
        <div class="countdown-text">Get Ready!</div>
    </div>

    <!-- Simple Game View -->
    <div class="view game-view" id="simple-game-view">
        <div class="game-container">
            <button class="back-btn" onclick="returnToMenu()">‚Üê Main Menu</button>
            <h1>üéÆ Simple Mode</h1>
            
            <div class="question-display" id="questionDisplay">
                The question will appear here...
            </div>

            <div class="answers-display" id="answersDisplay">
                <!-- Answers will be displayed here -->
            </div>

            <div class="status-message thinking" id="statusMessage">
                ‚è≥ Think about the question...
            </div>

            <div class="controls">
                <button class="next-btn" onclick="nextQuestion()" id="nextButton">
                    Next Question
                </button>
            </div>

            <div class="music-controls">
                <button class="btn-music" onclick="toggleMusic()">
                    üîá Music
                </button>
            </div>
        </div>
    </div>

    <!-- Hard Game View -->
    <div class="view game-view" id="hard-game-view">
        <div class="game-container">
            <button class="back-btn" onclick="returnToMenu()">‚Üê Main Menu</button>
            <h1>üíÄ Hard Mode</h1>
            
            <div class="score-display" id="scoreDisplay">
                <!-- Player scores will be displayed here -->
            </div>
            
            <div class="question-display" id="hardQuestionDisplay">
                The question will appear here...
            </div>

            <div class="answers-display" id="hardAnswersDisplay">
                <!-- Answers will be displayed here -->
            </div>

            <div class="status-message thinking" id="hardStatusMessage">
                ‚è≥ Think about the question...
            </div>

            <div class="penalty-message" id="penaltyMessage">
                <!-- Penalty messages will appear here -->
            </div>

            <div class="controls">
                <button class="next-btn" onclick="nextHardQuestion()" id="hardNextButton">
                    Next Question
                </button>
            </div>

            <div class="music-controls">
                <button class="btn-music" onclick="toggleMusic()">
                    üîá Music
                </button>
            </div>
        </div>
    </div>

    <!-- Audio -->
    <audio id="bipSound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-alarm-digital-clock-beep-989.mp3" type="audio/mpeg">
    </audio>

    <audio id="countdownSound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-retro-game-countdown-929.mp3" type="audio/mpeg">
    </audio>

    <audio id="ambienceMusic" loop preload="auto">
        <source src="https://assets.mixkit.co/music/preview/mixkit-tech-house-vibes-130.mp3" type="audio/mpeg">
    </audio>

    <audio id="errorSound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-wrong-answer-fail-notification-946.mp3" type="audio/mpeg">
    </audio>

    <script>
        // Game variables
        let currentTimer;
        let timeLeft;
        const thinkingTime = 10;
        const blueScreenTime = 5;
        let currentQuestionIndex = 0;
        let isMusicPlaying = false;
        let countdownInterval;

        // Hard Mode specific variables
        let isBlueScreenActive = false;
        let canAnswer = false;
        let players = [];
        let currentPlayerIndex = 0;
        let playerWhoAnswered = null;
        let penaltyActive = false;

        // DOM Elements
        const questionDisplay = document.getElementById('questionDisplay');
        const answersDisplay = document.getElementById('answersDisplay');
        const statusMessage = document.getElementById('statusMessage');
        const bipSound = document.getElementById('bipSound');
        const countdownSound = document.getElementById('countdownSound');
        const ambienceMusic = document.getElementById('ambienceMusic');
        const errorSound = document.getElementById('errorSound');
        const countdownNumber = document.getElementById('countdownNumber');
        const nextButton = document.getElementById('nextButton');
        const gameView = document.getElementById('simple-game-view');
        
        // Hard Mode DOM Elements
        const hardQuestionDisplay = document.getElementById('hardQuestionDisplay');
        const hardAnswersDisplay = document.getElementById('hardAnswersDisplay');
        const hardStatusMessage = document.getElementById('hardStatusMessage');
        const hardNextButton = document.getElementById('hardNextButton');
        const hardGameView = document.getElementById('hard-game-view');
        const scoreDisplay = document.getElementById('scoreDisplay');
        const penaltyMessage = document.getElementById('penaltyMessage');

        // Sample questions
        const sampleQuestions = [
            {
                question: "What is the capital of France?",
                answers: [
                    { text: "London", correct: false },
                    { text: "Paris", correct: true },
                    { text: "Berlin", correct: false },
                    { text: "Madrid", correct: false }
                ]
            },
            {
                question: "How much is 2 + 2?",
                answers: [
                    { text: "3", correct: false },
                    { text: "4", correct: true },
                    { text: "5", correct: false },
                    { text: "6", correct: false }
                ]
            },
            {
                question: "What is the color of the sky on a clear day?",
                answers: [
                    { text: "Red", correct: false },
                    { text: "Green", correct: false },
                    { text: "Blue", correct: true },
                    { text: "Yellow", correct: false }
                ]
            },
            {
                question: "Which planet is known as the Red Planet?",
                answers: [
                    { text: "Venus", correct: false },
                    { text: "Mars", correct: true },
                    { text: "Jupiter", correct: false },
                    { text: "Saturn", correct: false }
                ]
            },
            {
                question: "What is the largest mammal in the world?",
                answers: [
                    { text: "Elephant", correct: false },
                    { text: "Blue Whale", correct: true },
                    { text: "Giraffe", correct: false },
                    { text: "Polar Bear", correct: false }
                ]
            }
        ];

        // Function to change view
        function showView(viewId) {
            document.querySelectorAll('.view').forEach(view => {
                view.classList.remove('active');
            });
            document.getElementById(viewId).classList.add('active');
        }

        // Start simple game - IMMEDIATE COUNTDOWN
        function startSimpleGame() {
            showView('countdown-view');
            startCountdown();
        }

        // Start hard game
        function startHardGame() {
            // Initialize players
            const playerCount = prompt("Enter number of players (2-6):", "2");
            const numPlayers = parseInt(playerCount);
            
            if (isNaN(numPlayers) || numPlayers < 2 || numPlayers > 6) {
                alert("Please enter a valid number between 2 and 6");
                return;
            }
            
            players = [];
            for (let i = 1; i <= numPlayers; i++) {
                players.push({
                    id: i,
                    name: `Player ${i}`,
                    score: 0,
                    active: i === 1 // First player is active initially
                });
            }
            
            showView('countdown-view');
            startCountdown('hard');
        }

        // Return to menu from game
        function returnToMenu() {
            if (confirm("Do you really want to return to the menu? Your progress will be lost.")) {
                clearInterval(currentTimer);
                stopAmbienceMusic();
                showView('main-menu');
            }
        }

        // Start countdown
        function startCountdown(mode = 'simple') {
            let count = 3;
            countdownNumber.textContent = count;
            
            countdownSound.play();
            
            countdownInterval = setInterval(() => {
                count--;
                countdownNumber.textContent = count;
                
                if (count <= 0) {
                    clearInterval(countdownInterval);
                    if (mode === 'hard') {
                        startHardGameSession();
                    } else {
                        startSimpleGameSession();
                    }
                }
            }, 1000);
        }

        // Start simple game session
        function startSimpleGameSession() {
            showView('simple-game-view');
            currentQuestionIndex = 0;
            startNewQuestion();
        }

        // Start hard game session
        function startHardGameSession() {
            showView('hard-game-view');
            currentQuestionIndex = 0;
            updateScoreDisplay();
            startNewHardQuestion();
        }

        // Update score display for hard mode
        function updateScoreDisplay() {
            scoreDisplay.innerHTML = '';
            players.forEach(player => {
                const playerElement = document.createElement('div');
                playerElement.className = `player-score ${player.active ? 'active' : ''}`;
                playerElement.innerHTML = `
                    <h4>${player.name}</h4>
                    <p>Files: ${player.score}</p>
                `;
                scoreDisplay.appendChild(playerElement);
            });
        }

        // Start a new question for simple mode
        function startNewQuestion() {
            if (currentQuestionIndex >= sampleQuestions.length) {
                currentQuestionIndex = 0;
            }

            const question = sampleQuestions[currentQuestionIndex];
            currentQuestionIndex++;

            // Display the question
            questionDisplay.textContent = question.question;
            
            // Display all answers (without correct/incorrect indication)
            answersDisplay.innerHTML = '';
            question.answers.forEach((answer, index) => {
                const answerElement = document.createElement('div');
                answerElement.className = 'answer-item incorrect';
                answerElement.textContent = `${String.fromCharCode(65 + index)}) ${answer.text}`;
                answersDisplay.appendChild(answerElement);
            });

            // Reset interface
            statusMessage.textContent = "‚è≥ Think about the question...";
            statusMessage.className = 'status-message thinking';
            nextButton.style.display = 'none';
            gameView.classList.remove('blue-screen');

            startAmbienceMusic();
            startTimer();
        }

        // Start a new question for hard mode
        function startNewHardQuestion() {
            if (currentQuestionIndex >= sampleQuestions.length) {
                currentQuestionIndex = 0;
            }

            const question = sampleQuestions[currentQuestionIndex];
            currentQuestionIndex++;

            // Reset game state
            isBlueScreenActive = false;
            canAnswer = false;
            playerWhoAnswered = null;
            penaltyActive = false;
            penaltyMessage.textContent = '';

            // Display the question
            hardQuestionDisplay.textContent = question.question;
            
            // Display all answers (initially disabled)
            hardAnswersDisplay.innerHTML = '';
            question.answers.forEach((answer, index) => {
                const answerElement = document.createElement('div');
                answerElement.className = 'answer-item incorrect disabled';
                answerElement.textContent = `${String.fromCharCode(65 + index)}) ${answer.text}`;
                answerElement.dataset.index = index;
                answerElement.dataset.correct = answer.correct;
                hardAnswersDisplay.appendChild(answerElement);
            });

            // Reset interface
            hardStatusMessage.textContent = "‚è≥ Think about the question...";
            hardStatusMessage.className = 'status-message thinking';
            hardNextButton.style.display = 'none';
            hardGameView.classList.remove('blue-screen');

            startAmbienceMusic();
            startHardTimer();
        }

        // Hidden timer for simple mode
        function startTimer() {
            timeLeft = thinkingTime;

            currentTimer = setInterval(() => {
                timeLeft--;

                if (timeLeft <= 0) {
                    clearInterval(currentTimer);
                    timeUp();
                }
            }, 1000);
        }

        // Timer for hard mode
        function startHardTimer() {
            timeLeft = thinkingTime;

            currentTimer = setInterval(() => {
                timeLeft--;

                if (timeLeft <= 0) {
                    clearInterval(currentTimer);
                    hardTimeUp();
                }
            }, 1000);
        }

        // Time's up for simple mode
        function timeUp() {
            stopAmbienceMusic();
            bipSound.play();
            
            // Show blue screen
            showBlueScreen();
        }

        // Time's up for hard mode
        function hardTimeUp() {
            stopAmbienceMusic();
            bipSound.play();
            
            // Show blue screen and enable answering
            showHardBlueScreen();
        }

        // Show blue screen for simple mode
        function showBlueScreen() {
            gameView.classList.add('blue-screen');
            statusMessage.textContent = "‚è∞ Time's up!";
            statusMessage.className = 'blue-screen-message';
            
            // After blueScreenTime seconds, show the answer
            setTimeout(() => {
                showCorrectAnswer();
            }, blueScreenTime * 1000);
        }

        // Show blue screen for hard mode
        function showHardBlueScreen() {
            hardGameView.classList.add('blue-screen');
            hardStatusMessage.textContent = "‚è∞ Time's up! ANSWER NOW!";
            hardStatusMessage.className = 'blue-screen-message';
            
            isBlueScreenActive = true;
            canAnswer = true;
            
            // Enable answer selection
            const answerElements = hardAnswersDisplay.querySelectorAll('.answer-item');
            answerElements.forEach(element => {
                element.classList.remove('disabled');
                element.classList.add('selectable');
                element.addEventListener('click', handleAnswerSelection);
            });
            
            // After blueScreenTime seconds, disable answering and show correct answer
            setTimeout(() => {
                canAnswer = false;
                isBlueScreenActive = false;
                showHardCorrectAnswer();
            }, blueScreenTime * 1000);
        }

        // Handle answer selection in hard mode
        function handleAnswerSelection(event) {
            if (!canAnswer) {
                // Player answered before blue screen - penalty
                if (!isBlueScreenActive) {
                    penaltyActive = true;
                    penaltyMessage.textContent = `‚ö†Ô∏è ${players[currentPlayerIndex].name} answered too early! Skipping turn.`;
                    errorSound.play();
                    
                    // Disable all answers
                    const answerElements = hardAnswersDisplay.querySelectorAll('.answer-item');
                    answerElements.forEach(element => {
                        element.classList.remove('selectable');
                        element.classList.add('disabled');
                        element.removeEventListener('click', handleAnswerSelection);
                    });
                    
                    // Move to next player
                    moveToNextPlayer();
                }
                return;
            }
            
            // Record who answered
            playerWhoAnswered = currentPlayerIndex;
            
            const selectedElement = event.currentTarget;
            const isCorrect = selectedElement.dataset.correct === 'true';
            
            // Show result immediately
            if (isCorrect) {
                // Correct answer
                players[currentPlayerIndex].score += 5; // Award 5 points for correct answer
                hardStatusMessage.textContent = `‚úÖ ${players[currentPlayerIndex].name} answered correctly! +5 files`;
                selectedElement.classList.add('correct');
                
                // Check for win condition
                if (players[currentPlayerIndex].score >= 20) {
                    setTimeout(() => {
                        alert(`üéâ ${players[currentPlayerIndex].name} wins with ${players[currentPlayerIndex].score} files!`);
                        returnToMenu();
                    }, 1500);
                    return;
                }
            } else {
                // Incorrect answer
                hardStatusMessage.textContent = `‚ùå ${players[currentPlayerIndex].name} answered incorrectly!`;
                selectedElement.classList.add('incorrect');
                
                // Highlight correct answer
                const answerElements = hardAnswersDisplay.querySelectorAll('.answer-item');
                answerElements.forEach(element => {
                    if (element.dataset.correct === 'true') {
                        element.classList.add('correct');
                    }
                });
            }
            
            // Disable further answers
            canAnswer = false;
            const answerElements = hardAnswersDisplay.querySelectorAll('.answer-item');
            answerElements.forEach(element => {
                element.classList.remove('selectable');
                element.classList.add('disabled');
                element.removeEventListener('click', handleAnswerSelection);
            });
            
            // Show next button
            hardNextButton.style.display = 'block';
            
            // Update score display
            updateScoreDisplay();
        }

        // Show correct answer for simple mode
        function showCorrectAnswer() {
            const question = sampleQuestions[currentQuestionIndex - 1];
            
            // Mark the correct answer in green
            const answerElements = answersDisplay.querySelectorAll('.answer-item');
            question.answers.forEach((answer, index) => {
                if (answer.correct) {
                    answerElements[index].className = 'answer-item correct';
                }
            });

            statusMessage.textContent = "‚úÖ Here is the correct answer!";
            statusMessage.className = 'status-message thinking';
            gameView.classList.remove('blue-screen');
            nextButton.style.display = 'block';
        }

        // Show correct answer for hard mode
        function showHardCorrectAnswer() {
            const question = sampleQuestions[currentQuestionIndex - 1];
            
            // Mark the correct answer in green
            const answerElements = hardAnswersDisplay.querySelectorAll('.answer-item');
            question.answers.forEach((answer, index) => {
                if (answer.correct) {
                    answerElements[index].className = 'answer-item correct';
                }
            });

            hardStatusMessage.textContent = "‚è∞ Time's up! Here is the correct answer!";
            hardStatusMessage.className = 'status-message thinking';
            hardGameView.classList.remove('blue-screen');
            hardNextButton.style.display = 'block';
            
            // If no one answered, move to next player
            if (playerWhoAnswered === null && !penaltyActive) {
                moveToNextPlayer();
            }
        }

        // Move to next player in hard mode
        function moveToNextPlayer() {
            players[currentPlayerIndex].active = false;
            currentPlayerIndex = (currentPlayerIndex + 1) % players.length;
            players[currentPlayerIndex].active = true;
            updateScoreDisplay();
        }

        // Next question for simple mode
        function nextQuestion() {
            startNewQuestion();
        }

        // Next question for hard mode
        function nextHardQuestion() {
            // Move to next player if no penalty was applied
            if (!penaltyActive && playerWhoAnswered === null) {
                moveToNextPlayer();
            } else if (playerWhoAnswered !== null) {
                // If someone answered, move to next player
                moveToNextPlayer();
            }
            // If penalty was active, we already moved to next player
            
            startNewHardQuestion();
        }

        // Music management
        function startAmbienceMusic() {
            if (isMusicPlaying) {
                ambienceMusic.currentTime = 0;
                ambienceMusic.volume = 0.3;
                ambienceMusic.play().catch(e => console.log("Audio error:", e));
            }
        }

        function stopAmbienceMusic() {
            if (isMusicPlaying && !ambienceMusic.paused) {
                ambienceMusic.pause();
            }
        }

        function toggleMusic() {
            const musicBtn = document.querySelector('.btn-music');
            
            if (isMusicPlaying) {
                ambienceMusic.pause();
                musicBtn.innerHTML = 'üîá Music';
                isMusicPlaying = false;
            } else {
                ambienceMusic.volume = 0.3;
                ambienceMusic.play().then(() => {
                    musicBtn.innerHTML = 'üîä Music';
                    isMusicPlaying = true;
                }).catch(e => {
                    console.log("Music error:", e);
                });
            }
        }

        // Random slogans
        const slogans = [
            "Be the fastest, be the smartest, beat the beep!",
        ];

        document.getElementById('slogan').textContent = slogans[Math.floor(Math.random() * slogans.length)];
    </script>
</body>
</html>