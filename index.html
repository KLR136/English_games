<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EL BEEPER - The Ultimate Quiz Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            transition: all 0.5s ease;
        }

        .view {
            display: none;
            width: 100%;
            height: 100vh;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 20px;
            position: relative;
        }

        .view.active {
            display: flex;
        }

        /* Splash Screen */
        .splash-screen {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .splash-logo {
            max-width: 300px;
            width: 80%;
            height: auto;
            animation: fadeIn 2s ease-in-out;
            margin-bottom: 20px;
        }

        @keyframes fadeIn {
            0% { opacity: 0; transform: scale(0.8); }
            100% { opacity: 1; transform: scale(1); }
        }

        .splash-text {
            font-size: 24px;
            font-weight: bold;
            animation: pulse 2s infinite;
        }

        .team-logo {
            position: absolute;
            bottom: 20px;
            max-width: 150px;
            width: 40%;
            height: auto;
            opacity: 0.8;
        }

        /* Main Menu */
        .menu-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            text-align: center;
            max-width: 500px;
            width: 90%;
            color: #333;
            position: relative;
        }

        .logo-space {
            margin-bottom: 20px;
        }

        .menu-logo {
            max-width: 200px;
            width: 100%;
            height: auto;
            margin-bottom: 15px;
        }

        .logo {
            width: 120px;
            height: 120px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            border-radius: 50%;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 48px;
            font-weight: bold;
        }

        .slogan-space {
            margin-bottom: 30px;
        }

        .slogan {
            font-size: 18px;
            color: #666;
            font-style: italic;
            line-height: 1.4;
        }

        .menu-buttons {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .menu-btn {
            padding: 15px 30px;
            border: none;
            border-radius: 50px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-rules {
            background: linear-gradient(45deg, #32cd32, #00b894);
            color: white;
        }

        .btn-simple {
            background: linear-gradient(45deg, #0000ff, #add8e6);
            color: white;
        }

        .btn-hard {
            background: linear-gradient(45deg, #ff0000, #ff6347);
            color: white;
        }

        .menu-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .menu-btn:active {
            transform: translateY(-1px);
        }

        .back-btn {
            background: #636e72;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            background: #2d3436;
        }

        /* Rules View */
        .rules-content {
            text-align: left;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-top: 20px;
            max-height: 60vh;
            overflow-y: auto;
        }

        .rules-content h2 {
            color: #333;
            margin-bottom: 20px;
            text-align: center;
            font-size: 28px;
        }

        .rules-content h3 {
            color: #ff6b6b;
            margin: 20px 0 10px 0;
            font-size: 20px;
        }

        .rules-content p {
            margin-bottom: 15px;
            line-height: 1.6;
            color: #555;
        }

        .rules-content ul {
            margin-left: 20px;
            margin-bottom: 15px;
        }

        .rules-content li {
            margin-bottom: 10px;
            color: #555;
            line-height: 1.5;
        }

        .game-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .info-item {
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 15px;
            border-radius: 10px;
            margin: 5px;
            flex: 1;
            min-width: 120px;
        }

        .info-item h4 {
            color: #ff6b6b;
            margin-bottom: 5px;
        }

        /* Countdown View */
        .countdown-view {
            background: linear-gradient(135deg, #00b894 0%, #00a085 100%);
        }

        .countdown-number {
            font-size: 120px;
            font-weight: bold;
            animation: pulse 1s ease-in-out;
        }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.7; }
            100% { transform: scale(1); opacity: 1; }
        }

        .countdown-text {
            font-size: 24px;
            margin-top: 20px;
            font-weight: bold;
        }

        /* Game View */
        .game-view {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: background-color 0.5s ease;
        }

        .blue-screen {
            background: linear-gradient(135deg, #0077b6 0%, #0096c7 100%) !important;
        }

        .red-screen {
            background: linear-gradient(135deg, #dc3545 0%, #c82333 100%) !important;
        }

        .game-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            text-align: center;
            max-width: 600px;
            width: 90%;
            color: #333;
        }

        .question-display {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 30px;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1.4;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 15px;
            border: 3px solid #e9ecef;
        }

        .answers-display {
            margin: 30px 0;
            text-align: left;
        }

        .answer-item {
            padding: 15px;
            margin: 10px 0;
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .answer-item.correct {
            background: #d4edda;
            border-color: #28a745;
            color: #155724;
            font-weight: bold;
        }

        .answer-item.incorrect {
            background: #f8f9fa;
            border-color: #e9ecef;
            color: #666;
        }

        .answer-item.selectable {
            cursor: pointer;
        }

        .answer-item.selectable:hover {
            background: #e9ecef;
            transform: translateY(-2px);
        }

        .answer-item.disabled {
            cursor: not-allowed;
            opacity: 0.6;
        }

        .status-message {
            font-size: 20px;
            margin: 30px 0;
            min-height: 30px;
            font-weight: bold;
            padding: 15px;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.9);
        }

        .thinking {
            color: #667eea;
        }

        .blue-screen-message {
            color: white;
            font-size: 32px;
            font-weight: bold;
            text-align: center;
        }

        .red-screen-message {
            color: white;
            font-size: 32px;
            font-weight: bold;
            text-align: center;
        }

        .controls {
            margin-top: 30px;
        }

        .next-btn {
            background: linear-gradient(45deg, #00b894, #00a085);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .next-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .hidden {
            display: none;
        }

        /* Music Controls */
        .music-controls {
            margin-top: 20px;
        }

        .btn-music {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 8px 15px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 14px;
        }

        /* Player Score Display */
        .score-display {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }

        .player-score {
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 15px;
            border-radius: 10px;
            margin: 5px;
            flex: 1;
            min-width: 120px;
            max-width: 200px;
        }

        .player-score h4 {
            color: #6c5ce7;
            margin-bottom: 5px;
        }

        /* Penalty Message */
        .penalty-message {
            color: #ff6b6b;
            font-weight: bold;
            font-size: 18px;
            margin: 10px 0;
        }

        /* Trick Message */
        .trick-message {
            color: #ff6b6b;
            font-weight: bold;
            font-size: 18px;
            margin: 10px 0;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Game Over Screen */
        .game-over {
            text-align: center;
            padding: 20px;
        }

        .game-over h2 {
            font-size: 36px;
            margin-bottom: 20px;
            color: #6c5ce7;
        }

        .game-over p {
            font-size: 24px;
            margin-bottom: 30px;
        }

        /* Team Logo in Main Menu */
        .menu-team-logo {
            max-width: 120px;
            width: 30%;
            height: auto;
            margin-top: 20px;
            opacity: 0.7;
        }
    </style>
</head>
<body>
    <!-- Splash Screen -->
    <div class="view active" id="splash-screen">
        <div class="splash-screen">
            <img src="images/game_logo.png" alt="EL BEEPER Logo" class="splash-logo" id="splashLogo">
            <div class="splash-text">Loading...</div>
            <img src="images/team_logo.png" alt="Team Logo" class="team-logo" id="splashTeamLogo">
        </div>
    </div>

    <!-- Main Menu -->
    <div class="view" id="main-menu">
        <div class="menu-container">
            <div class="logo-space">
                <img src="images/game_logo.png" alt="EL BEEPER Logo" class="menu-logo" id="menuLogo">
            </div>
            
            <div class="slogan-space">
                <p class="slogan" id="slogan">Test your knowledge in Simple Mode or challenge yourself in Hard Mode!</p>
            </div>
            
            <div class="menu-buttons">
                <button class="menu-btn btn-rules" onclick="showView('rules-view')">
                    üìã Rules
                </button>
                <button class="menu-btn btn-simple" onclick="startSimpleGame()">
                    üéÆ Simple Mode
                </button>
                <button class="menu-btn btn-hard" onclick="startHardGame()">
                    üíÄ Hard Mode
                </button>
            </div>
            
            <img src="images/team_logo.png" alt="Team Logo" class="menu-team-logo" id="menuTeamLogo">
        </div>
    </div>

    <!-- Rules View -->
    <div class="view" id="rules-view">
        <div class="menu-container">
            <button class="back-btn" onclick="showView('main-menu')">‚Üê Back</button>
            <div class="rules-content">
                <h2>EL BEEPER RULES</h2>
                
                <div class="game-info">
                    <div class="info-item">
                        <h4>AGE</h4>
                        <p>12 years old +</p>
                    </div>
                    <div class="info-item">
                        <h4>DURATION</h4>
                        <p>15 min</p>
                    </div>
                    <div class="info-item">
                        <h4>PLAYERS</h4>
                        <p>1 player</p>
                    </div>
                </div>
                
                <h3>THE OBJECTIVE</h3>
                <p>First to win 20 files, wins and ends the game.</p>
                
                <h3>GAME MODES</h3>
                <p>2 modes: Simple mode and Hard mode</p>
                
                <h3>HOW TO PLAY</h3>
                <ol>
                    <li>Choose a game mode: simple or hard.</li>
                    <li>The game will ask a question, you'll have to answer it as soon as you hear the sound "BEEP", by clicking on the correct answer.</li>
                    <li><strong>ATTENTION:</strong> In hard mode if you click an answer before the "BEEP" or the screen is anything but blue, you lose points for this turn.</li>
                    <li><strong>TRICK:</strong> Sometimes the screen turns RED instead of blue - this is a trick! Don't be fooled!</li>
                    <li>If the answer is right, you win "files" (depending on the number of points the question made you earn). If the answer is wrong, you don't gain files at all.</li>
                </ol>
                
                <p><strong>The first to win 20 files, wins and ends the game.</strong></p>
            </div>
        </div>
    </div>

    <!-- Countdown View -->
    <div class="view countdown-view" id="countdown-view">
        <div class="countdown-number" id="countdownNumber">3</div>
        <div class="countdown-text">Get Ready!</div>
    </div>

    <!-- Simple Game View -->
    <div class="view game-view" id="simple-game-view">
        <div class="game-container">
            <button class="back-btn" onclick="returnToMenu()">‚Üê Main Menu</button>
            <h1>üéÆ Simple Mode</h1>
            
            <div class="question-display" id="questionDisplay">
                The question will appear here...
            </div>

            <div class="answers-display" id="answersDisplay">
                <!-- Answers will be displayed here -->
            </div>

            <div class="status-message thinking" id="statusMessage">
                ‚è≥ Think about the question...
            </div>

            <div class="controls">
                <button class="next-btn" onclick="nextQuestion()" id="nextButton">
                    Next Question
                </button>
            </div>

            <div class="music-controls">
                <button class="btn-music" onclick="toggleMusic()">
                    üîá Music
                </button>
            </div>
        </div>
    </div>

    <!-- Hard Game View -->
    <div class="view game-view" id="hard-game-view">
        <div class="game-container">
            <button class="back-btn" onclick="returnToMenu()">‚Üê Main Menu</button>
            <h1>üíÄ Hard Mode</h1>
            
            <div class="score-display">
                <div class="player-score">
                    <h4>Your Files</h4>
                    <p id="playerScore">0</p>
                </div>
            </div>
            
            <div class="question-display" id="hardQuestionDisplay">
                The question will appear here...
            </div>

            <div class="answers-display" id="hardAnswersDisplay">
                <!-- Answers will be displayed here -->
            </div>

            <div class="status-message thinking" id="hardStatusMessage">
                ‚è≥ Think about the question...
            </div>

            <div class="penalty-message" id="penaltyMessage">
                <!-- Penalty messages will appear here -->
            </div>

            <div class="trick-message" id="trickMessage">
                <!-- Trick messages will appear here -->
            </div>

            <div class="controls">
                <button class="next-btn" onclick="nextHardQuestion()" id="hardNextButton">
                    Next Question
                </button>
            </div>

            <div class="music-controls">
                <button class="btn-music" onclick="toggleMusic()">
                    üîá Music
                </button>
            </div>
        </div>
    </div>

    <!-- Game Over View -->
    <div class="view" id="game-over-view">
        <div class="menu-container game-over">
            <h2>üéâ Congratulations! üéâ</h2>
            <p>You've collected <span id="finalScore">20</span> files!</p>
            <p>You are the EL BEEPER champion!</p>
            <button class="menu-btn btn-hard" onclick="showView('main-menu')">
                Play Again
            </button>
        </div>
    </div>

    <!-- Audio -->
    <audio id="bipSound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-alarm-digital-clock-beep-989.mp3" type="audio/mpeg">
    </audio>

    <audio id="countdownSound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-retro-game-countdown-929.mp3" type="audio/mpeg">
    </audio>

    <audio id="ambienceMusic" loop preload="auto">
        <source src="https://assets.mixkit.co/music/preview/mixkit-tech-house-vibes-130.mp3" type="audio/mpeg">
    </audio>

    <audio id="errorSound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-wrong-answer-fail-notification-946.mp3" type="audio/mpeg">
    </audio>

    <audio id="winSound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3" type="audio/mpeg">
    </audio>

    <audio id="trickSound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-funny-cartoon-jump-465.mp3" type="audio/mpeg">
    </audio>

    <script>
        // Game variables
        let currentTimer;
        let timeLeft;
        const thinkingTime = 10;
        const blueScreenTime = 5;
        let currentQuestionIndex = 0;
        let isMusicPlaying = false;
        let countdownInterval;

        // Hard Mode specific variables
        let isBlueScreenActive = false;
        let canAnswer = false;
        let playerScore = 0;
        let penaltyActive = false;
        let isTrickScreen = false;

        // DOM Elements
        const questionDisplay = document.getElementById('questionDisplay');
        const answersDisplay = document.getElementById('answersDisplay');
        const statusMessage = document.getElementById('statusMessage');
        const bipSound = document.getElementById('bipSound');
        const countdownSound = document.getElementById('countdownSound');
        const ambienceMusic = document.getElementById('ambienceMusic');
        const errorSound = document.getElementById('errorSound');
        const winSound = document.getElementById('winSound');
        const trickSound = document.getElementById('trickSound');
        const countdownNumber = document.getElementById('countdownNumber');
        const nextButton = document.getElementById('nextButton');
        const gameView = document.getElementById('simple-game-view');
        
        // Hard Mode DOM Elements
        const hardQuestionDisplay = document.getElementById('hardQuestionDisplay');
        const hardAnswersDisplay = document.getElementById('hardAnswersDisplay');
        const hardStatusMessage = document.getElementById('hardStatusMessage');
        const hardNextButton = document.getElementById('hardNextButton');
        const hardGameView = document.getElementById('hard-game-view');
        const playerScoreDisplay = document.getElementById('playerScore');
        const penaltyMessage = document.getElementById('penaltyMessage');
        const trickMessage = document.getElementById('trickMessage');
        const finalScoreDisplay = document.getElementById('finalScore');
        const gameOverView = document.getElementById('game-over-view');

        // Logo elements
        const splashLogo = document.getElementById('splashLogo');
        const menuLogo = document.getElementById('menuLogo');
        const splashTeamLogo = document.getElementById('splashTeamLogo');
        const menuTeamLogo = document.getElementById('menuTeamLogo');

        // Sample questions
        const sampleQuestions = [
            {
                question: "What is the capital of France?",
                answers: [
                    { text: "London", correct: false },
                    { text: "Paris", correct: true },
                    { text: "Berlin", correct: false },
                    { text: "Madrid", correct: false }
                ]
            },
            {
                question: "How much is 2 + 2?",
                answers: [
                    { text: "3", correct: false },
                    { text: "4", correct: true },
                    { text: "5", correct: false },
                    { text: "6", correct: false }
                ]
            },
            {
                question: "What is the color of the sky on a clear day?",
                answers: [
                    { text: "Red", correct: false },
                    { text: "Green", correct: false },
                    { text: "Blue", correct: true },
                    { text: "Yellow", correct: false }
                ]
            },
            {
                question: "Which planet is known as the Red Planet?",
                answers: [
                    { text: "Venus", correct: false },
                    { text: "Mars", correct: true },
                    { text: "Jupiter", correct: false },
                    { text: "Saturn", correct: false }
                ]
            },
            {
                question: "What is the largest mammal in the world?",
                answers: [
                    { text: "Elephant", correct: false },
                    { text: "Blue Whale", correct: true },
                    { text: "Giraffe", correct: false },
                    { text: "Polar Bear", correct: false }
                ]
            },
            {
                question: "How many continents are there?",
                answers: [
                    { text: "5", correct: false },
                    { text: "6", correct: false },
                    { text: "7", correct: true },
                    { text: "8", correct: false }
                ]
            },
            {
                question: "What is the chemical symbol for gold?",
                answers: [
                    { text: "Go", correct: false },
                    { text: "Gd", correct: false },
                    { text: "Au", correct: true },
                    { text: "Ag", correct: false }
                ]
            },
            {
                question: "Who painted the Mona Lisa?",
                answers: [
                    { text: "Vincent van Gogh", correct: false },
                    { text: "Pablo Picasso", correct: false },
                    { text: "Leonardo da Vinci", correct: true },
                    { text: "Michelangelo", correct: false }
                ]
            }
        ];

        // Function to change view
        function showView(viewId) {
            document.querySelectorAll('.view').forEach(view => {
                view.classList.remove('active');
            });
            document.getElementById(viewId).classList.add('active');
        }

        // Start simple game - IMMEDIATE COUNTDOWN
        function startSimpleGame() {
            showView('countdown-view');
            startCountdown();
        }

        // Start hard game
        function startHardGame() {
            // Reset player score
            playerScore = 0;
            updateScoreDisplay();
            
            showView('countdown-view');
            startCountdown('hard');
        }

        // Return to menu from game
        function returnToMenu() {
            if (confirm("Do you really want to return to the menu? Your progress will be lost.")) {
                clearInterval(currentTimer);
                stopAmbienceMusic();
                showView('main-menu');
            }
        }

        // Start countdown
        function startCountdown(mode = 'simple') {
            let count = 3;
            countdownNumber.textContent = count;
            
            countdownSound.play();
            
            countdownInterval = setInterval(() => {
                count--;
                countdownNumber.textContent = count;
                
                if (count <= 0) {
                    clearInterval(countdownInterval);
                    if (mode === 'hard') {
                        startHardGameSession();
                    } else {
                        startSimpleGameSession();
                    }
                }
            }, 1000);
        }

        // Start simple game session
        function startSimpleGameSession() {
            showView('simple-game-view');
            currentQuestionIndex = 0;
            startNewQuestion();
        }

        // Start hard game session
        function startHardGameSession() {
            showView('hard-game-view');
            currentQuestionIndex = 0;
            startNewHardQuestion();
        }

        // Update score display for hard mode
        function updateScoreDisplay() {
            playerScoreDisplay.textContent = playerScore;
        }

        // Start a new question for simple mode
        function startNewQuestion() {
            if (currentQuestionIndex >= sampleQuestions.length) {
                currentQuestionIndex = 0;
            }

            const question = sampleQuestions[currentQuestionIndex];
            currentQuestionIndex++;

            // Display the question
            questionDisplay.textContent = question.question;
            
            // Display all answers (without correct/incorrect indication)
            answersDisplay.innerHTML = '';
            question.answers.forEach((answer, index) => {
                const answerElement = document.createElement('div');
                answerElement.className = 'answer-item incorrect';
                answerElement.textContent = `${String.fromCharCode(65 + index)}) ${answer.text}`;
                answersDisplay.appendChild(answerElement);
            });

            // Reset interface
            statusMessage.textContent = "‚è≥ Think about the question...";
            statusMessage.className = 'status-message thinking';
            nextButton.style.display = 'none';
            gameView.classList.remove('blue-screen');

            startAmbienceMusic();
            startTimer();
        }

        // Start a new question for hard mode
        function startNewHardQuestion() {
            if (currentQuestionIndex >= sampleQuestions.length) {
                currentQuestionIndex = 0;
            }

            const question = sampleQuestions[currentQuestionIndex];
            currentQuestionIndex++;

            // Reset game state
            isBlueScreenActive = false;
            canAnswer = false;
            penaltyActive = false;
            isTrickScreen = false;
            penaltyMessage.textContent = '';
            trickMessage.textContent = '';

            // Display the question
            hardQuestionDisplay.textContent = question.question;
            
            // Display all answers (initially disabled)
            hardAnswersDisplay.innerHTML = '';
            question.answers.forEach((answer, index) => {
                const answerElement = document.createElement('div');
                answerElement.className = 'answer-item incorrect disabled';
                answerElement.textContent = `${String.fromCharCode(65 + index)}) ${answer.text}`;
                answerElement.dataset.index = index;
                answerElement.dataset.correct = answer.correct;
                hardAnswersDisplay.appendChild(answerElement);
            });

            // Reset interface
            hardStatusMessage.textContent = "‚è≥ Think about the question...";
            hardStatusMessage.className = 'status-message thinking';
            hardNextButton.style.display = 'none';
            hardGameView.classList.remove('blue-screen');
            hardGameView.classList.remove('red-screen');

            startAmbienceMusic();
            startHardTimer();
        }

        // Hidden timer for simple mode
        function startTimer() {
            timeLeft = thinkingTime;

            currentTimer = setInterval(() => {
                timeLeft--;

                if (timeLeft <= 0) {
                    clearInterval(currentTimer);
                    timeUp();
                }
            }, 1000);
        }

        // Timer for hard mode
        function startHardTimer() {
            timeLeft = thinkingTime;

            currentTimer = setInterval(() => {
                timeLeft--;

                if (timeLeft <= 0) {
                    clearInterval(currentTimer);
                    hardTimeUp();
                }
            }, 1000);
        }

        // Time's up for simple mode
        function timeUp() {
            stopAmbienceMusic();
            bipSound.play();
            
            // Show blue screen
            showBlueScreen();
        }

        // Time's up for hard mode
        function hardTimeUp() {
            stopAmbienceMusic();
            bipSound.play();
            
            // Randomly decide if this will be a trick screen (30% chance)
            isTrickScreen = Math.random() < 0.3;
            
            if (isTrickScreen) {
                showRedScreen();
            } else {
                showHardBlueScreen();
            }
        }

        // Show blue screen for simple mode
        function showBlueScreen() {
            gameView.classList.add('blue-screen');
            statusMessage.textContent = "‚è∞ Time's up!";
            statusMessage.className = 'blue-screen-message';
            
            // After blueScreenTime seconds, show the answer
            setTimeout(() => {
                showCorrectAnswer();
            }, blueScreenTime * 1000);
        }

        // Show blue screen for hard mode
        function showHardBlueScreen() {
            hardGameView.classList.add('blue-screen');
            hardStatusMessage.textContent = "‚è∞ Time's up! ANSWER NOW!";
            hardStatusMessage.className = 'blue-screen-message';
            
            isBlueScreenActive = true;
            canAnswer = true;
            
            // Enable answer selection
            const answerElements = hardAnswersDisplay.querySelectorAll('.answer-item');
            answerElements.forEach(element => {
                element.classList.remove('disabled');
                element.classList.add('selectable');
                element.addEventListener('click', handleAnswerSelection);
            });
            
            // After blueScreenTime seconds, disable answering and show correct answer
            setTimeout(() => {
                canAnswer = false;
                isBlueScreenActive = false;
                showHardCorrectAnswer();
            }, blueScreenTime * 1000);
        }

        // Show red screen (trick) for hard mode
        function showRedScreen() {
            hardGameView.classList.add('red-screen');
            hardStatusMessage.textContent = "‚è∞ Time's up!";
            hardStatusMessage.className = 'red-screen-message';
            trickMessage.textContent = "‚ö†Ô∏è TRICK! Wait for the BLUE screen!";
            
            // Play trick sound
            trickSound.play();
            
            // After a shorter time, switch to blue screen
            setTimeout(() => {
                hardGameView.classList.remove('red-screen');
                hardGameView.classList.add('blue-screen');
                hardStatusMessage.className = 'blue-screen-message';
                trickMessage.textContent = "";
                
                // Enable answering on blue screen
                isBlueScreenActive = true;
                canAnswer = true;
                
                // Enable answer selection
                const answerElements = hardAnswersDisplay.querySelectorAll('.answer-item');
                answerElements.forEach(element => {
                    element.classList.remove('disabled');
                    element.classList.add('selectable');
                    element.addEventListener('click', handleAnswerSelection);
                });
                
                // Then show the answer after the remaining time
                setTimeout(() => {
                    canAnswer = false;
                    isBlueScreenActive = false;
                    showHardCorrectAnswer();
                }, (blueScreenTime - 1.5) * 1000);
            }, 1500);
        }

        // Handle answer selection in hard mode
        function handleAnswerSelection(event) {
            if (!canAnswer) {
                // Player answered before blue screen - penalty
                if (!isBlueScreenActive) {
                    penaltyActive = true;
                    penaltyMessage.textContent = `‚ö†Ô∏è You answered too early! -2 points penalty.`;
                    errorSound.play();
                    
                    // Apply penalty
                    playerScore = Math.max(0, playerScore - 2);
                    updateScoreDisplay();
                    
                    // Disable all answers
                    const answerElements = hardAnswersDisplay.querySelectorAll('.answer-item');
                    answerElements.forEach(element => {
                        element.classList.remove('selectable');
                        element.classList.add('disabled');
                        element.removeEventListener('click', handleAnswerSelection);
                    });
                }
                return;
            }
            
            const selectedElement = event.currentTarget;
            const isCorrect = selectedElement.dataset.correct === 'true';
            
            // Show result immediately
            if (isCorrect) {
                // Correct answer
                playerScore += 5; // Award 5 points for correct answer
                hardStatusMessage.textContent = `‚úÖ You answered correctly! +5 files`;
                selectedElement.classList.add('correct');
                
                // Check for win condition
                if (playerScore >= 20) {
                    setTimeout(() => {
                        finalScoreDisplay.textContent = playerScore;
                        winSound.play();
                        showView('game-over-view');
                    }, 1500);
                    return;
                }
            } else {
                // Incorrect answer
                hardStatusMessage.textContent = `‚ùå You answered incorrectly!`;
                selectedElement.classList.add('incorrect');
                
                // Highlight correct answer
                const answerElements = hardAnswersDisplay.querySelectorAll('.answer-item');
                answerElements.forEach(element => {
                    if (element.dataset.correct === 'true') {
                        element.classList.add('correct');
                    }
                });
            }
            
            // Disable further answers
            canAnswer = false;
            const answerElements = hardAnswersDisplay.querySelectorAll('.answer-item');
            answerElements.forEach(element => {
                element.classList.remove('selectable');
                element.classList.add('disabled');
                element.removeEventListener('click', handleAnswerSelection);
            });
            
            // Show next button
            hardNextButton.style.display = 'block';
            
            // Update score display
            updateScoreDisplay();
        }

        // Show correct answer for simple mode
        function showCorrectAnswer() {
            const question = sampleQuestions[currentQuestionIndex - 1];
            
            // Mark the correct answer in green
            const answerElements = answersDisplay.querySelectorAll('.answer-item');
            question.answers.forEach((answer, index) => {
                if (answer.correct) {
                    answerElements[index].className = 'answer-item correct';
                }
            });

            statusMessage.textContent = "‚úÖ Here is the correct answer!";
            statusMessage.className = 'status-message thinking';
            gameView.classList.remove('blue-screen');
            nextButton.style.display = 'block';
        }

        // Show correct answer for hard mode
        function showHardCorrectAnswer() {
            const question = sampleQuestions[currentQuestionIndex - 1];
            
            // Mark the correct answer in green
            const answerElements = hardAnswersDisplay.querySelectorAll('.answer-item');
            question.answers.forEach((answer, index) => {
                if (answer.correct) {
                    answerElements[index].className = 'answer-item correct';
                }
            });

            // Award points for correct answer (only if it wasn't a trick screen with penalty)
            if (!penaltyActive) {
                if (!isTrickScreen) {
                    playerScore += 5;
                    updateScoreDisplay();
                    hardStatusMessage.textContent = "‚úÖ Here is the correct answer! +5 files";
                } else {
                    hardStatusMessage.textContent = "‚úÖ Here is the correct answer! (No points - trick screen)";
                }
            } else {
                hardStatusMessage.textContent = "‚úÖ Here is the correct answer!";
            }
            
            hardStatusMessage.className = 'status-message thinking';
            hardGameView.classList.remove('blue-screen');
            hardGameView.classList.remove('red-screen');
            hardNextButton.style.display = 'block';
            penaltyMessage.textContent = "";
            trickMessage.textContent = "";
        }

        // Next question for simple mode
        function nextQuestion() {
            startNewQuestion();
        }

        // Next question for hard mode
        function nextHardQuestion() {
            startNewHardQuestion();
        }

        // Music management
        function startAmbienceMusic() {
            if (isMusicPlaying) {
                ambienceMusic.currentTime = 0;
                ambienceMusic.volume = 0.3;
                ambienceMusic.play().catch(e => console.log("Audio error:", e));
            }
        }

        function stopAmbienceMusic() {
            if (isMusicPlaying && !ambienceMusic.paused) {
                ambienceMusic.pause();
            }
        }

        function toggleMusic() {
            const musicBtn = document.querySelector('.btn-music');
            
            if (isMusicPlaying) {
                ambienceMusic.pause();
                musicBtn.innerHTML = 'üîá Music';
                isMusicPlaying = false;
            } else {
                ambienceMusic.volume = 0.3;
                ambienceMusic.play().then(() => {
                    musicBtn.innerHTML = 'üîä Music';
                    isMusicPlaying = true;
                }).catch(e => {
                    console.log("Music error:", e);
                });
            }
        }

        // Random slogans
        const slogans = [
            "Test your knowledge in Simple Mode or challenge yourself in Hard Mode!",
            "Can you take on the challenge? Simple or Hard mode, the choice is yours!",
            "Knowledge has no limits. Test it now!"
        ];

        document.getElementById('slogan').textContent = slogans[Math.floor(Math.random() * slogans.length)];

        // Handle logo loading and splash screen
        function handleLogoLoad() {
            // If logo loads successfully, proceed after delay
            setTimeout(() => {
                showView('main-menu');
            }, 3000); // Show splash screen for 3 seconds
        }

        function handleLogoError() {
            // If logo fails to load, show fallback text and proceed
            splashLogo.style.display = 'none';
            document.querySelector('.splash-text').textContent = 'EL BEEPER';
            setTimeout(() => {
                showView('main-menu');
            }, 3000);
        }

        // Set up logo event listeners
        splashLogo.onload = handleLogoLoad;
        splashLogo.onerror = handleLogoError;
        menuLogo.onerror = function() {
            // If menu logo fails to load, hide it
            menuLogo.style.display = 'none';
        };
        
        // Set up team logo event listeners
        splashTeamLogo.onerror = function() {
            splashTeamLogo.style.display = 'none';
        };
        menuTeamLogo.onerror = function() {
            menuTeamLogo.style.display = 'none';
        };

        // Check if logo has already loaded (cached case)
        if (splashLogo.complete) {
            handleLogoLoad();
        }
    </script>
</body>
</html>